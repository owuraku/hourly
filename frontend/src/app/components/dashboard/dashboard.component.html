<div>
  <div class="card">
    <div class="card-header">
      FILTER INPUT
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-3">
          <label ngbButtonLabel for="typeahead-prevent-manual-entry"
            >Search for a user:</label
          >
          <input
            id="typeahead-prevent-manual-entry"
            type="text"
            class="form-control"
            [(ngModel)]="userModel"
            [ngbTypeahead]="search"
            [inputFormatter]="formatter"
            [resultFormatter]="formatter"
            [editable]="false"
          />
          <small *ngIf="searching">
            Searching for user...
          </small>
          <small *ngIf="searchFailed">
            No user found
          </small>
        </div>
        <div class="col-md-9">
          <div *ngIf="true">
            <p>Select date range :</p>
            <form class="form-inline">
              <div class="form-group hidden">
                <div class="input-group">
                  <input
                    name="datepicker"
                    class="form-control"
                    ngbDatepicker
                    #datepicker="ngbDatepicker"
                    [autoClose]="'outside'"
                    (dateSelect)="onDateSelection($event)"
                    [displayMonths]="2"
                    [dayTemplate]="t"
                    outsideDays="hidden"
                    [startDate]="fromDate"
                    [footerTemplate]="footerTemplate"
                  />
                  <ng-template #t let-date let-focused="focused">
                    <span
                      class="custom-day"
                      [class.focused]="focused"
                      [class.range]="isRange(date)"
                      [class.faded]="isHovered(date) || isInside(date)"
                      (mouseenter)="hoveredDate = date"
                      (mouseleave)="hoveredDate = null"
                    >
                      {{ date.day }}
                    </span>
                  </ng-template>
                </div>
              </div>
              <div class="form-group">
                <label ngbButtonLabel for="dpFromDate">Start Date</label>
                <div class="input-group">
                  <input
                    #dpFromDate
                    class="form-control"
                    placeholder="yyyy-mm-dd"
                    name="dpFromDate"
                    [value]="formatterDate.format(fromDate)"
                    (input)="
                      fromDate = validateInput(fromDate, dpFromDate.value)
                    "
                  />
                  <div class="input-group-append">
                    <button
                      class="btn btn-outline-secondary calendar"
                      (click)="datepicker.toggle()"
                      type="button"
                    >
                      <fa-icon [icon]="faCalendar"></fa-icon>
                    </button>
                  </div>
                  <ng-template #footerTemplate>
                    <hr class="my-0" />
                    <button
                      ngbButton
                      class="btn btn-danger btn-sm m-2 float-right"
                      (click)="datepicker.close()"
                    >
                      Close
                    </button>
                  </ng-template>
                </div>
              </div>
              <div class="form-group">
                <div class="input-group">
                  <label ngbButtonLabel for="dpToDate">End Date</label>
                  <input
                    #dpToDate
                    class="form-control ml-2"
                    placeholder="yyyy-mm-dd"
                    name="dpToDate"
                    [value]="formatterDate.format(toDate)"
                    (input)="toDate = validateInput(toDate, dpToDate.value)"
                  />
                  <div class="input-group-append">
                    <button
                      class="btn btn-outline-secondary calendar"
                      (click)="datepicker.toggle()"
                      type="button"
                    >
                      <fa-icon [icon]="faCalendar"></fa-icon>
                    </button>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="card-footer">
      <button ngbButton class="btn btn-primary" (click)="updateTable()">
        Update Results
      </button>
    </div>
  </div>
  <hr />
  <div class="card">
    <div class="card-header">
      USER STATISTICS
    </div>
    <div class="card-body">
      <table class="table table-responsive table-bordered">
        <thead>
          <tr class="bg-warning">
            <th scope="col">Username</th>
            <th scope="col">Min. Entry Time</th>
            <th scope="col">Max. Entry Time</th>
            <th scope="col">Min. Exit Time</th>
            <th scope="col">Max. Exit Time</th>
            <th scope="col">Min. Work Hours</th>
            <th scope="col">Max. Work Hours</th>
            <th scope="col">Avg. Work Hours</th>
            <th scope="col">Total Hours Worked</th>
            <th scope="col">Total Days Worked</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngIf="userstats.length === 0">
            <td colspan="10" class="text-center">
              No data available
            </td>
          </tr>
          <tr *ngFor="let userstat of userstats">
            <th scope="row">{{ userstat.username }}</th>
            <td>{{ userstat.earliestEntryTime }}</td>
            <td>{{ userstat.latestEntryTime }}</td>
            <td>{{ userstat.earliestExitTime }}</td>
            <td>{{ userstat.latestExitTime }}</td>
            <td>{{ userstat.minhours }}</td>
            <td>{{ userstat.maxhours }}</td>
            <td>{{ userstat.avghours }}</td>
            <td>{{ userstat.totalhours }}</td>
            <td>{{ userstat.totaldays }}</td>
          </tr>
        </tbody>
      </table>

      <div class="d-flex justify-content-between p-2">
        <!-- <ngb-pagination
        [collectionSize]="collectionSize"
        [(page)]="page"
        [pageSize]="pageSize"
      >
      </ngb-pagination> -->

        <!-- <select style="width: auto" [(ngModel)]="pageSize">
                <option [ngValue]="2">2 items per page</option>
                <option [ngValue]="4">4 items per page</option>
                <option [ngValue]="6">6 items per page</option>
            </select> -->
      </div>
    </div>
  </div>
</div>
